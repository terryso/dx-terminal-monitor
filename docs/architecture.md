# DX Terminal Monitor - æ¶æ„æ–‡æ¡£

## æ‰§è¡Œæ‘˜è¦

DX Terminal Monitor æ˜¯ä¸€ä¸ª Telegram Bot æœåŠ¡ï¼Œé‡‡ç”¨åŒæ¨¡å¼æ¶æ„è®¾è®¡ï¼š
- **REST API å®¢æˆ·ç«¯** - ç”¨äºåªè¯»æŸ¥è¯¢ï¼ˆä½™é¢ã€æŒä»“ã€æ´»åŠ¨è®°å½•ï¼‰
- **æ™ºèƒ½åˆçº¦äº¤äº’å±‚** - ç”¨äºå†™å…¥æ“ä½œï¼ˆç­–ç•¥ç®¡ç†ã€è®¾ç½®æ›´æ–°ã€èµ„é‡‘æ“ä½œï¼‰

ç”¨æˆ·å¯ä»¥é€šè¿‡ Telegram å‘½ä»¤ç›‘æ§å’Œç®¡ç† Terminal Markets Vaultã€‚

---

## æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| ç¼–ç¨‹è¯­è¨€ | Python | 3.x | ä¸»è¦å¼€å‘è¯­è¨€ |
| Bot æ¡†æ¶ | python-telegram-bot | >=21.0 | Telegram Bot API å°è£… |
| HTTP å®¢æˆ·ç«¯ | aiohttp | >=3.9.3 | å¼‚æ­¥ HTTP è¯·æ±‚ |
| åŒºå—é“¾äº¤äº’ | web3.py | >=6.0.0 | æ™ºèƒ½åˆçº¦è°ƒç”¨ |
| é…ç½®ç®¡ç† | python-dotenv | >=1.0.0 | ç¯å¢ƒå˜é‡ç®¡ç† |

---

## æ¶æ„æ¨¡å¼

### æ•´ä½“æ¶æ„ï¼ˆåŒæ¨¡å¼ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Telegram Platform                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ Bot API (Long Polling)
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DX Terminal Monitor                      â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   main.py   â”‚  â”‚   api.py    â”‚  â”‚ contract.py â”‚         â”‚
â”‚  â”‚ (Bot Logic) â”‚â”€â”€â”‚ (REST API)  â”‚â”€â”€â”‚   (Web3)    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                â”‚                â”‚                 â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                          â”‚                                  â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                  â”‚   config.py   â”‚                          â”‚
â”‚                  â”‚   (Config)    â”‚                          â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                      â”‚
            â”‚ REST API             â”‚ Smart Contract Calls
            â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Terminal Markets  â”‚    â”‚         Ethereum Network             â”‚
â”‚      API          â”‚    â”‚                                      â”‚
â”‚ (Read-Only)       â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                   â”‚    â”‚  â”‚     AgentVault Contract     â”‚    â”‚
â”‚ â€¢ /positions      â”‚    â”‚  â”‚  â€¢ disableStrategy(id)      â”‚    â”‚
â”‚ â€¢ /strategies     â”‚    â”‚  â”‚  â€¢ addStrategy(...)         â”‚    â”‚
â”‚ â€¢ /activity       â”‚    â”‚  â”‚  â€¢ pauseVault(bool)         â”‚    â”‚
â”‚ â€¢ /swaps          â”‚    â”‚  â”‚  â€¢ updateSettings(...)      â”‚    â”‚
â”‚ â€¢ /vault          â”‚    â”‚  â”‚  â€¢ withdrawETH(amount)      â”‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµæ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‘½ä»¤åˆ†ç±»                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        åªè¯»å‘½ä»¤ (REST)      â”‚       å†™å…¥å‘½ä»¤ (Contract)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ /balance   - ä½™é¢æŸ¥è¯¢       â”‚ /disable_strategy <id>          â”‚
â”‚ /pnl       - ç›ˆäºæŸ¥è¯¢       â”‚ /enable_strategy <id>           â”‚
â”‚ /positions - æŒä»“æŸ¥è¯¢       â”‚ /add_strategy <text>            â”‚
â”‚ /activity  - æ´»åŠ¨è®°å½•       â”‚ /pause_vault                    â”‚
â”‚ /swaps     - äº¤æ˜“è®°å½•       â”‚ /resume_vault                   â”‚
â”‚ /strategies- ç­–ç•¥åˆ—è¡¨       â”‚ /update_settings <json>         â”‚
â”‚ /vault     - Vaultä¿¡æ¯      â”‚ /withdraw <amount>              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç»„ä»¶ç»“æ„

### 1. å‘½ä»¤å¤„ç†å±‚ (main.py)

- **èŒè´£**: å¤„ç† Telegram å‘½ä»¤ï¼Œæ ¼å¼åŒ–å“åº”
- **è®¾è®¡æ¨¡å¼**: Command Pattern
- **å‘½ä»¤åˆ—è¡¨**:

| å‘½ä»¤ | æ•°æ®æº | è¯´æ˜ |
|------|--------|------|
| `/start` | - | å¸®åŠ©ä¿¡æ¯ |
| `/balance` | REST API | ä½™é¢æŸ¥è¯¢ |
| `/pnl` | REST API | ç›ˆäºæŸ¥è¯¢ |
| `/positions` | REST API | æŒä»“æŸ¥è¯¢ |
| `/activity` | REST API | æ´»åŠ¨è®°å½• |
| `/swaps` | REST API | äº¤æ˜“è®°å½• |
| `/strategies` | REST API | ç­–ç•¥åˆ—è¡¨ |
| `/vault` | REST API | Vault ä¿¡æ¯ |
| `/disable_strategy` | Contract | ç¦ç”¨ç­–ç•¥ |
| `/enable_strategy` | Contract | å¯ç”¨ç­–ç•¥ |
| `/add_strategy` | Contract | æ·»åŠ ç­–ç•¥ |
| `/pause_vault` | Contract | æš‚åœäº¤æ˜“ |
| `/withdraw` | Contract | æå– ETH |

### 2. REST API å®¢æˆ·ç«¯å±‚ (api.py)

- **èŒè´£**: å°è£… Terminal Markets REST API è°ƒç”¨ï¼ˆåªè¯»ï¼‰
- **è®¾è®¡æ¨¡å¼**: Repository Pattern
- **ç‰¹æ€§**:
  - å¼‚æ­¥ HTTP è¯·æ±‚
  - ç»Ÿä¸€é”™è¯¯å¤„ç†
  - ç±»å‹æ³¨è§£

### 3. æ™ºèƒ½åˆçº¦äº¤äº’å±‚ (contract.py) ğŸ†•

- **èŒè´£**: å°è£… AgentVault åˆçº¦è°ƒç”¨ï¼ˆå†™å…¥æ“ä½œï¼‰
- **è®¾è®¡æ¨¡å¼**: Gateway Pattern
- **ä¾èµ–**: web3.py
- **ç‰¹æ€§**:
  - ç§é’¥ç­¾åäº¤æ˜“
  - Gas è´¹ç”¨ä¼°ç®—
  - äº¤æ˜“ç¡®è®¤ç­‰å¾…
  - é”™è¯¯é‡è¯•æœºåˆ¶

```python
# contract.py ç»“æ„ç¤ºä¾‹
from web3 import Web3
from config import RPC_URL, PRIVATE_KEY, VAULT_ADDRESS

class VaultContract:
    def __init__(self):
        self.w3 = Web3(Web3.HTTPProvider(RPC_URL))
        self.contract = self.w3.eth.contract(
            address=VAULT_ADDRESS,
            abi=CONTRACT_ABI
        )

    async def disable_strategy(self, strategy_id: int) -> dict:
        """ç¦ç”¨æŒ‡å®šç­–ç•¥"""
        tx = self.contract.functions.disableStrategy(strategy_id)
        return await self._send_transaction(tx)

    async def add_strategy(self, content: str, expiry: int, priority: int) -> dict:
        """æ·»åŠ æ–°ç­–ç•¥"""
        tx = self.contract.functions.addStrategy(content, expiry, priority)
        return await self._send_transaction(tx)
```

### 4. é…ç½®å±‚ (config.py)

- **èŒè´£**: åŠ è½½å’Œç®¡ç†é…ç½®
- **é…ç½®æ¥æº**: ç¯å¢ƒå˜é‡ (.env)
- **é…ç½®é¡¹**:

| é…ç½®é¡¹ | è¯´æ˜ | æ•æ„Ÿ |
|--------|------|------|
| `TELEGRAM_BOT_TOKEN` | Bot ä»¤ç‰Œ | âœ… |
| `ALLOWED_USERS` | æˆæƒç”¨æˆ·åˆ—è¡¨ | âŒ |
| `VAULT_ADDRESS` | Vault åˆçº¦åœ°å€ | âŒ |
| `API_BASE_URL` | REST API åŸºç¡€ URL | âŒ |
| `RPC_URL` | Ethereum RPC ç«¯ç‚¹ | âŒ |
| `PRIVATE_KEY` | é’±åŒ…ç§é’¥ | âœ… |
| `CHAIN_ID` | é“¾ ID (1=mainnet, 11155111=sepolia) | âŒ |

---

## API è®¾è®¡

### REST API æ–¹æ³•ï¼ˆåªè¯»ï¼‰

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|------|------|------|
| `get_vault()` | `/vault` | Vault åŸºæœ¬ä¿¡æ¯ |
| `get_positions()` | `/positions/{vault}` | æŒä»“ä¿¡æ¯ |
| `get_pnl_history()` | `/pnl-history/{vault}` | ç›ˆäºå†å² |
| `get_activity()` | `/activity/{vault}` | æœ€è¿‘æ´»åŠ¨ |
| `get_strategies()` | `/strategies/{vault}` | æ´»è·ƒç­–ç•¥ |
| `get_swaps()` | `/swaps` | äº¤æ˜“è®°å½• |
| `get_deposits_withdrawals()` | `/deposits-withdrawals/{vault}` | å­˜å–æ¬¾è®°å½• |

### æ™ºèƒ½åˆçº¦æ–¹æ³•ï¼ˆå†™å…¥ï¼‰ğŸ†•

| æ–¹æ³• | åˆçº¦å‡½æ•° | è¯´æ˜ |
|------|----------|------|
| `disable_strategy(id)` | `disableStrategy(uint256)` | ç¦ç”¨å•ä¸ªç­–ç•¥ |
| `disable_all_strategies()` | `disableAllActiveStrategies()` | ç¦ç”¨æ‰€æœ‰ç­–ç•¥ |
| `add_strategy(text, expiry, priority)` | `addStrategy(string, uint64, uint8)` | æ·»åŠ æ–°ç­–ç•¥ |
| `pause_vault(paused)` | `pauseVault(bool)` | æš‚åœ/æ¢å¤äº¤æ˜“ |
| `update_settings(settings)` | `updateSettings(tuple)` | æ›´æ–°äº¤æ˜“å‚æ•° |
| `withdraw_eth(amount)` | `withdrawETH(uint256)` | æå– ETH |

### é”™è¯¯å¤„ç†ç­–ç•¥

```python
# REST API å±‚
if resp.status == 200:
    return await resp.json()
return {"error": f"HTTP {resp.status}"}

# Contract å±‚
try:
    tx_hash = await self._send_transaction(tx)
    receipt = await self._wait_for_confirmation(tx_hash)
    return {"success": True, "tx_hash": tx_hash}
except ContractLogicError as e:
    return {"error": f"Contract error: {e}"}
except Exception as e:
    return {"error": f"Transaction failed: {e}"}

# å‘½ä»¤å±‚
if "error" in result:
    await update.message.reply_text(f"Error: {result['error']}")
    return
```

---

## å®‰å…¨è®¾è®¡ ğŸ†•

### ç§é’¥ç®¡ç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ç§é’¥å­˜å‚¨æ–¹æ¡ˆ                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¼€å‘ç¯å¢ƒ: .env æ–‡ä»¶ (ä¸æäº¤åˆ° Git)        â”‚
â”‚ ç”Ÿäº§ç¯å¢ƒ: ç¯å¢ƒå˜é‡ æˆ– å¯†é’¥ç®¡ç†æœåŠ¡         â”‚
â”‚ æœªæ¥æ‰©å±•: Hardware Wallet / KMS          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¿é—®æ§åˆ¶

- **ç”¨æˆ·æˆæƒ**: åŸºäºç”¨æˆ· ID çš„è®¿é—®æ§åˆ¶
- **å‘½ä»¤åˆ†çº§**:
  - ğŸŸ¢ ä½é£é™©: æŸ¥è¯¢å‘½ä»¤ï¼ˆæ‰€æœ‰æˆæƒç”¨æˆ·ï¼‰
  - ğŸŸ¡ ä¸­é£é™©: ç­–ç•¥ç®¡ç†ï¼ˆéœ€è¦äºŒæ¬¡ç¡®è®¤ï¼‰
  - ğŸ”´ é«˜é£é™©: èµ„é‡‘æ“ä½œï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰

### äº¤æ˜“å®‰å…¨

- **Gas é™åˆ¶**: è®¾ç½®æœ€å¤§ Gas è´¹ç”¨
- **äº¤æ˜“ç¡®è®¤**: ç­‰å¾…åŒºå—ç¡®è®¤åæ‰è¿”å›æˆåŠŸ
- **æ¨¡æ‹Ÿæ‰§è¡Œ**: åœ¨å‘é€å‰æ¨¡æ‹Ÿäº¤æ˜“ï¼ˆeth_callï¼‰

---

## å¯é æ€§è®¾è®¡

### è‡ªåŠ¨é‡è¯•æœºåˆ¶

```python
# Bot å±‚é‡è¯•
retry_count = 0
max_retries = 10
base_delay = 5

while retry_count < max_retries:
    try:
        app.run_polling(...)
    except (TimedOut, NetworkError) as e:
        delay = min(base_delay * (2 ** (retry_count - 1)), 300)
        time.sleep(delay)

# Contract å±‚é‡è¯• ğŸ†•
async def send_transaction_with_retry(self, tx, max_retries=3):
    for attempt in range(max_retries):
        try:
            return await self._send_transaction(tx)
        except TransactionFailed as e:
            if "nonce" in str(e).lower():
                # Nonce é”™è¯¯ï¼Œé‡è¯•
                await asyncio.sleep(2 ** attempt)
                continue
            raise
```

---

## éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¿è¡Œç¯å¢ƒ (æœ¬åœ°/VPS)                        â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Python è™šæ‹Ÿç¯å¢ƒ (venv)                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚               DX Terminal Monitor                    â”‚    â”‚
â”‚  â”‚                                                       â”‚    â”‚
â”‚  â”‚  ç¯å¢ƒå˜é‡:                                            â”‚    â”‚
â”‚  â”‚  â€¢ TELEGRAM_BOT_TOKEN                                â”‚    â”‚
â”‚  â”‚  â€¢ VAULT_ADDRESS                                     â”‚    â”‚
â”‚  â”‚  â€¢ RPC_URL (Ethereum RPC)                            â”‚    â”‚
â”‚  â”‚  â€¢ PRIVATE_KEY (æ•æ„Ÿ!)                               â”‚    â”‚
â”‚  â”‚                                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                           â”‚
            â”‚ HTTPS                     â”‚ HTTPS/WebSocket
            â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Telegram Servers  â”‚       â”‚      Ethereum RPC             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  (Infura / Alchemy / è‡ªå»º)     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ–‡ä»¶ç»“æ„

```
dx-terminal-monitor/
â”œâ”€â”€ main.py              # Bot å‘½ä»¤å¤„ç†
â”œâ”€â”€ api.py               # REST API å®¢æˆ·ç«¯ (åªè¯»)
â”œâ”€â”€ contract.py          # æ™ºèƒ½åˆçº¦äº¤äº’å±‚ ğŸ†•
â”œâ”€â”€ config.py            # é…ç½®ç®¡ç†
â”œâ”€â”€ abi/                 # åˆçº¦ ABI æ–‡ä»¶ ğŸ†•
â”‚   â””â”€â”€ AgentVault.json
â”œâ”€â”€ requirements.txt     # Python ä¾èµ–
â”œâ”€â”€ .env.example         # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .env                 # ç¯å¢ƒå˜é‡ (ä¸æäº¤)
â”œâ”€â”€ tests/               # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ conftest.py
â”‚   â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ integration/
â”‚   â””â”€â”€ api/
â””â”€â”€ docs/
    â”œâ”€â”€ architecture.md
    â”œâ”€â”€ api-contracts.md
    â””â”€â”€ development-guide.md
```

---

## æµ‹è¯•ç­–ç•¥

- **å½“å‰çŠ¶æ€**: 81 ä¸ªæµ‹è¯•ï¼Œ96% è¦†ç›–ç‡
- **æµ‹è¯•åˆ†å±‚**:
  - å•å…ƒæµ‹è¯•: Mock API/Contract è°ƒç”¨
  - é›†æˆæµ‹è¯•: çœŸå® REST APIï¼ˆå¯é€‰ï¼‰
  - Contract æµ‹è¯•: ä½¿ç”¨ Anvil/Hardhat æœ¬åœ°ç½‘ç»œ ğŸ†•

---

## æ‰©å±•æ€§è€ƒè™‘

### å·²å®ç° âœ…

1. âœ… æµ‹è¯•æ¡†æ¶ (pytest)
2. âœ… CI/CD ç®¡é“ (GitHub Actions)
3. âœ… å‘½ä»¤å¤„ç†å™¨æ¨¡å¼

### è¿›è¡Œä¸­ ğŸ”„

1. ğŸ”„ Web3.py é›†æˆ
2. ğŸ”„ ç­–ç•¥ç®¡ç†å‘½ä»¤

### æœªæ¥æ‰©å±•æ–¹å‘ ğŸ“‹

1. **å¤š Vault æ”¯æŒ**: æ‰©å±•é…ç½®å’Œå‘½ä»¤
2. **æ¨é€é€šçŸ¥**: ä¸»åŠ¨å‘Šè­¦åŠŸèƒ½
3. **Web Dashboard**: æ·»åŠ  Web ç•Œé¢
4. **Hardware Wallet**: æ”¯æŒ Ledger/Trezor ç­¾å
